#### 1 TCP 与 UDP 协议

##### 1.1 UDP 协议

UDP 协议全称为 User Datagram Protocol，用户数据报协议，是相对比较简单的协议，主要有以下特点：

1. UDP 协议是 **无连接** 协议，也就是说，UDP 发送数据是不需要提前建立连接的

2. UDP 协议 **不保证可靠** 地交付数据，由于 UDP 是无连接协议，数据想发就发，所以是不管发出去的数据是否丢失的，UDP 协议也没有提供可靠的机制去确保数据完整地到达对方，即使数据有丢失，也无法感知到丢失
3. UDP 协议是 **面向报文** 传输的，所谓面向报文，即面向数据报传输，对于应用层传递的数据报，UDP 协议不会做任何处理
4. UDP 协议没有 **拥塞控制**，UDP 协议不会对网络的拥塞做控制，只管自己把数据报发出去即可，其他的一概不管
5. UDP 协议 **首部开销小**，UDP 首部由 16 位的源端口号和 16 位的目的端口号，以及16 位 UDP 长度，16 位 UDP 校验和组成

##### 1.2 TCP 协议

TCP 协议全称为 Transmission Control Protocol，传输控制协议，顾名思义，TCP 协议会对传输进行许多的控制，因而会比 UDP 协议更加复杂

1. TCP 协议是 **面向连接** 的协议，和 UDP协议不同，TCP 协议需要先建立连接，才能进行通信
2. TCP 协议是 **点对点** 通信
3. TCP 协议提供 **可靠的** 数据传输
4. TCP 协议提供 **全双工通信**，通信的双方均可主动向对方发送消息
5. TCP 协议是 **面向字节流** 的协议，流是指流入流出进程的字节序列，TCP 协议不将应用层传输的数据看作是完整的数据，而是当成一系列的字节序列流，传输时也可能不是一整块数据进行处理，而是会拆分成不同的字节序列进行传输，因此 TCP 可能会对用户传输的数据进行合并或者拆分，以便更好的进行数据的传输
6. TCP 协议的首部比 UDP 协议的更加复杂，相同的地方是，它们都有 16 位的源端口号和目的端口号，以及 16 位的校验和，不同点在于 TCP 协议有 32 位的序号 和 32 位的确认号，以及数据偏移、保留字段、TCP标记、窗口、紧急指针等等字段

下面更进一步介绍 TCP 协议的首部：

序号：序号范围是 `0 ~ 2^32 - 1`，TCP 是面向字节流的，一个传输的字节就对应一个序号，通常取第一个字节对应的序号

确认号：范围和序号相同，与序号相对，是期待收到的数据的首字节的序号

数据偏移：表示真实数据偏移数据首部的距离

TCP 标记：共有 6 个标记位，重要，需要熟记

| 标记 |                         含义                         |
| :--: | :--------------------------------------------------: |
| URG  |     Urgent，紧急位，URG = 1 表示该数据为紧急数据     |
| ACK  |   Acknowledgement，确认位，ACK = 1 表示确认号生效    |
| PSH  | Push，推送位，PSH = 1 表示期望尽快将数据传输到应用层 |
| RST  |    Reset，重置位，RST = 1 时表示期望重新建立连接     |
| SYN  |  Synchronization，同步位，SYN = 1 表示连接请求报文   |
| FIN  |     Finish，终止位，FIN = 1 表示希望断开 TCP连接     |

#### 2 websocket

